{"ast":null,"code":"import _slicedToArray from \"/home/ubuntu/projects/dashboard-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/ubuntu/projects/dashboard-template/src/features/dashboard/extrafunc/Timenav.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport DatePicker from \"react-datepicker\";\nimport calendar from \"./svg/calendar.svg\";\nimport left from \"./svg/left.svg\";\nimport right from \"./svg/right.svg\";\nimport { addDays } from 'date-fns';\nimport moment from 'moment';\nimport './style.less';\nimport \"react-datepicker/dist/react-datepicker.css\";\nexport var TimeNav = function TimeNav(_ref) {\n  var today = _ref.today,\n      startDate = _ref.startDate,\n      setStartDate = _ref.setStartDate;\n  var tz = \"America/Los_Angeles\";\n  var user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.company && user.company.tz) {\n    tz = user.company.tz.value;\n  }\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isCalendarOpen = _useState2[0],\n      setIsCalendarOpen = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      counter = _useState4[0],\n      setCounter = _useState4[1];\n\n  var dateRef = useRef(null);\n  useEffect(function () {\n    var cancel = false;\n    var timer = setTimeout(function () {\n      var dateInput = document.querySelector('.react-datepicker__input-container input');\n\n      if (dateInput) {\n        dateInput.addEventListener('focus', function () {\n          return setIsCalendarOpen(true);\n        });\n        dateInput.addEventListener('blur', function () {\n          return setIsCalendarOpen(false);\n        });\n      } else if (counter <= 3) {\n        setCounter(counter + 1);\n      }\n    }, 300);\n\n    if (!cancel) {}\n\n    return function () {\n      cancel = true;\n      clearTimeout(timer);\n    };\n  }, [counter]);\n\n  var getDate = function getDate(data) {\n    setStartDate(data);\n    setIsCalendarOpen(!isCalendarOpen);\n  };\n\n  var openCalendar = function openCalendar() {\n    setIsCalendarOpen(!isCalendarOpen);\n    isCalendarOpen ? dateRef.current.setFocus() : dateRef.current.setBlur();\n  };\n\n  var getYesterday = function getYesterday() {\n    var date = new Date(startDate);\n    date.setDate(date.getDate() - 1);\n    setStartDate(date);\n  };\n\n  var getTomorrow = function getTomorrow() {\n    if (today) return;\n    var date = new Date(startDate);\n    date.setDate(date.getDate() + 1);\n    setStartDate(date);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time-nav ml-3 mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"calendar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    ref: dateRef,\n    dateFormat: \"dd-MM-yyyy\",\n    selected: startDate,\n    onChange: getDate,\n    maxDate: addDays(new Date(moment().format('MMM DD, YYYYY')), 0),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: calendar,\n    onClick: openCalendar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"switcher\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 10\n    }\n  }, true && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: getYesterday,\n    className: \"left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: left,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: getTomorrow,\n    className: \"right \".concat(today ? \"cursor-block\" : \"\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: right,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  })), \" \")));\n};\n\n__signature__(TimeNav, \"useState{[isCalendarOpen, setIsCalendarOpen](true)}\\nuseState{[counter, setCounter](0)}\\nuseRef{dateRef}\\nuseEffect{}\");\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(TimeNav, \"TimeNav\", \"/home/ubuntu/projects/dashboard-template/src/features/dashboard/extrafunc/Timenav.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/dashboard-template/src/features/dashboard/extrafunc/Timenav.js"],"names":["React","useState","useRef","useEffect","DatePicker","addDays","moment","TimeNav","today","startDate","setStartDate","tz","user","JSON","parse","localStorage","getItem","company","value","isCalendarOpen","setIsCalendarOpen","counter","setCounter","dateRef","cancel","timer","setTimeout","dateInput","document","querySelector","addEventListener","clearTimeout","getDate","data","openCalendar","current","setFocus","setBlur","getYesterday","date","Date","setDate","getTomorrow","format","calendar","left","right"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport DatePicker from \"react-datepicker\";\r\nimport calendar from \"./svg/calendar.svg\";\r\nimport left from \"./svg/left.svg\";\r\nimport right from \"./svg/right.svg\";\r\nimport { addDays } from 'date-fns';\r\nimport moment from 'moment';\r\n\r\nimport './style.less'\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\n\r\nexport const TimeNav = ({ today, startDate, setStartDate }) => {\r\n   let tz = \"America/Los_Angeles\";\r\n   const user = JSON.parse(localStorage.getItem('user'));\r\n   if (user && user.company && user.company.tz) {\r\n      tz = user.company.tz.value;\r\n   }\r\n   const [isCalendarOpen, setIsCalendarOpen] = useState(true);\r\n   const [counter, setCounter] = useState(0);\r\n   const dateRef = useRef(null);\r\n\r\n   useEffect(() => {\r\n      let cancel = false;\r\n      let timer = setTimeout(() => {\r\n         let dateInput = document.querySelector('.react-datepicker__input-container input');\r\n         if (dateInput) {\r\n            dateInput.addEventListener('focus', () => setIsCalendarOpen(true));\r\n            dateInput.addEventListener('blur', () => setIsCalendarOpen(false));\r\n         } else if (counter <= 3) {\r\n            setCounter(counter + 1);\r\n         }\r\n      }, 300)\r\n      if (!cancel) {\r\n      }\r\n      return () => {\r\n         cancel = true;\r\n         clearTimeout(timer);\r\n      }\r\n   }, [counter])\r\n\r\n   const getDate = data => {\r\n      setStartDate(data);\r\n      setIsCalendarOpen(!isCalendarOpen);\r\n   }\r\n   const openCalendar = () => {\r\n      setIsCalendarOpen(!isCalendarOpen);\r\n      isCalendarOpen ? dateRef.current.setFocus() : dateRef.current.setBlur();\r\n   }\r\n\r\n   const getYesterday = () => {\r\n      const date = new Date(startDate);\r\n      date.setDate(date.getDate() - 1);\r\n      setStartDate(date);\r\n   }\r\n   const getTomorrow = () => {\r\n      if (today) return\r\n      const date = new Date(startDate);\r\n      date.setDate(date.getDate() + 1);\r\n      setStartDate(date);\r\n   }\r\n\r\n   return (\r\n      <div className=\"time-nav ml-3 mb-3\">\r\n         <div className=\"calendar\">\r\n            <DatePicker\r\n               ref={dateRef}\r\n               dateFormat=\"dd-MM-yyyy\"\r\n               selected={startDate}\r\n               onChange={getDate}\r\n               maxDate={addDays(new Date(moment().format('MMM DD, YYYYY')), 0)}\r\n            />\r\n            <img\r\n               src={calendar}\r\n               onClick={openCalendar} />\r\n         </div>\r\n         <span className=\"switcher\">\r\n            {true && <>\r\n               <span onClick={getYesterday} className=\"left\">\r\n                  <img src={left} />\r\n               </span>\r\n               <span onClick={getTomorrow} className={`right ${(today) ? \"cursor-block\" : \"\"}`}>\r\n                  <img src={right} />\r\n               </span> </>\r\n            }\r\n         </span>\r\n      </div>\r\n   )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}